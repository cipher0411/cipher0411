name: Update README fragments (quote of the day)


on:
schedule:
- cron: '0 8 * * *' # every day at 08:00 UTC (adjust if desired)
workflow_dispatch:


jobs:
generate_quote:
runs-on: ubuntu-latest
steps:
- name: Checkout
uses: actions/checkout@v4


- name: Select random quote
id: pick
run: |
# read quotes.txt into array (preserve full lines)
IFS=$'\n' read -d '' -r -a quotes < quotes.txt || true
len=${#quotes[@]}
if [ "$len" -eq 0 ]; then
echo "No quotes found in quotes.txt"
exit 1
fi
idx=$((RANDOM % len))
quote="${quotes[$idx]}"
# create markdown fragment
mkdir -p _dynamic
cat > _dynamic/quote.md <<EOF
### ðŸ” Cyber Tip of the Day


> ${quote}


_This tip is automatically rotated daily. â€” Generated by workflow._
EOF
echo "quote<<EOF" >> $GITHUB_OUTPUT
echo "${quote}" >> $GITHUB_OUTPUT
echo "EOF" >> $GITHUB_OUTPUT


- name: Commit quote fragment
run: |
git config user.name "github-actions[bot]"
git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
git add _dynamic/quote.md || true
git commit -m "chore: update dynamic quote" || echo "No changes to commit"
git push || echo "Push failed"